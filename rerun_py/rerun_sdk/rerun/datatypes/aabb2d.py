# DO NOT EDIT! This file was auto-generated by crates/re_types_builder/src/codegen/python/mod.rs
# Based on "crates/re_types/definitions/rerun/datatypes/aabb2d.fbs".

# You can extend this class by creating a "AABB2DExt" class in "aabb2d_ext.py".

from __future__ import annotations

from typing import Any, Sequence, Union

import pyarrow as pa
from attrs import define, field

from .. import datatypes
from .._baseclasses import BaseBatch, BaseExtensionType
from .aabb2d_ext import AABB2DExt

__all__ = ["AABB2D", "AABB2DArrayLike", "AABB2DBatch", "AABB2DLike", "AABB2DType"]


def _aabb2d__min__special_field_converter_override(x: datatypes.Vec2DLike) -> datatypes.Vec2D:
    if isinstance(x, datatypes.Vec2D):
        return x
    else:
        return datatypes.Vec2D(x)


def _aabb2d__max__special_field_converter_override(x: datatypes.Vec2DLike) -> datatypes.Vec2D:
    if isinstance(x, datatypes.Vec2D):
        return x
    else:
        return datatypes.Vec2D(x)


@define(init=False)
class AABB2D(AABB2DExt):
    """**Datatype**: An Axis-Aligned Bounding Box in 2D space, implemented as the minimum and maximum corners."""

    def __init__(self: Any, min: datatypes.Vec2DLike, max: datatypes.Vec2DLike):
        """
        Create a new instance of the AABB2D datatype.

        Parameters
        ----------
        min:
            The minimum bounds; usually left-top corner.
        max:
            The maximum bounds; usually right-bottom corner.

        """

        # You can define your own __init__ function as a member of AABB2DExt in aabb2d_ext.py
        self.__attrs_init__(min=min, max=max)

    min: datatypes.Vec2D = field(converter=_aabb2d__min__special_field_converter_override)
    # The minimum bounds; usually left-top corner.
    #
    # (Docstring intentionally commented out to hide this field from the docs)

    max: datatypes.Vec2D = field(converter=_aabb2d__max__special_field_converter_override)
    # The maximum bounds; usually right-bottom corner.
    #
    # (Docstring intentionally commented out to hide this field from the docs)


AABB2DLike = AABB2D
AABB2DArrayLike = Union[
    AABB2D,
    Sequence[AABB2DLike],
]


class AABB2DType(BaseExtensionType):
    _TYPE_NAME: str = "rerun.datatypes.AABB2D"

    def __init__(self) -> None:
        pa.ExtensionType.__init__(
            self,
            pa.struct([
                pa.field(
                    "min",
                    pa.list_(pa.field("item", pa.float32(), nullable=False, metadata={}), 2),
                    nullable=False,
                    metadata={},
                ),
                pa.field(
                    "max",
                    pa.list_(pa.field("item", pa.float32(), nullable=False, metadata={}), 2),
                    nullable=False,
                    metadata={},
                ),
            ]),
            self._TYPE_NAME,
        )


class AABB2DBatch(BaseBatch[AABB2DArrayLike]):
    _ARROW_TYPE = AABB2DType()

    @staticmethod
    def _native_to_pa_array(data: AABB2DArrayLike, data_type: pa.DataType) -> pa.Array:
        return AABB2DExt.native_to_pa_array_override(data, data_type)
