#!/bin/bash
# Wrapper script to run uv without CONDA_PREFIX so it uses .venv instead of pixi env
# This script is prepended to PATH by pixi activation so it shadows the real uv

# Find the real uv by temporarily removing our directory from PATH
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
CLEAN_PATH=$(echo "$PATH" | tr ':' '\n' | grep -v "^${SCRIPT_DIR}$" | tr '\n' ':' | sed 's/:$//')

# Run the real uv with CONDA_PREFIX unset
env -u CONDA_PREFIX PATH="$CLEAN_PATH" uv "$@"
