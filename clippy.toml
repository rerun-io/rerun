msrv = "1.67"


# https://rust-lang.github.io/rust-clippy/master/index.html#disallowed_macros
disallowed-macros = [
  'dbg',

  # TODO(emilk): consider forbidding these to encourage the use of proper log stream, and then explicitly allow legitimate uses
  # 'std::eprint',
  # 'std::eprintln',
  # 'std::print',
  # 'std::println',

  # 'std::unimplemented', # generated by ArrowDeserialize derive-macro :(
]

# https://rust-lang.github.io/rust-clippy/master/index.html#disallowed_methods
disallowed-methods = [
  "std::env::temp_dir", # Use the tempdir crate instead

  # Disabled because of https://github.com/rust-lang/rust-clippy/issues/10406
  #   "std::time::Instant::now",      # use `instant` crate instead for wasm/web compatibility
  "std::time::Duration::elapsed", # use `instant` crate instead for wasm/web compatibility
  "std::time::SystemTime::now",   # use `instant` or `time` crates instead for wasm/web compatibility

  "std::thread::spawn", # Use `std::thread::Builder` and name the thread

  "sha1::Digest::new", # SHA1 is cryptographically broken
]

# https://rust-lang.github.io/rust-clippy/master/index.html#disallowed_names
disallowed-names = []

# https://rust-lang.github.io/rust-clippy/master/index.html#disallowed_types
disallowed-types = [
  # Use the faster & simpler non-poisonable primitives in `parking_lot` instead
  "std::sync::Mutex",
  "std::sync::RwLock",
  "std::sync::Condvar",
  # "std::sync::Once",  # enabled for now as the `log_once` macro uses it internally

  "ring::digest::SHA1_FOR_LEGACY_USE_ONLY", # SHA1 is cryptographically broken
]

# Allow-list of words for markdown in dosctrings https://rust-lang.github.io/rust-clippy/master/index.html#doc_markdown
doc-valid-idents = [
  "GitHub",
  "GLB",
  "GLTF",
  "iOS",
  "macOS",
  "NaN",
  "OBJ",
  "PyPI",
  "sRGB",
  "sRGBA",
  "WebGL",
  "WebSockets",
]
