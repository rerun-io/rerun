name: Publish the CLI from a specific commit

on:
  workflow_dispatch:
    inputs:
      RELEASE_VERSION:
        description: "Release Version Number (Must match Cargo.toml)"
        type: string
        required: true
      RELEASE_COMMIT:
        description: "Commit to release"
        type: string
        required: false

permissions:
  contents: write
  id-token: "write"

jobs:
  publish-rerun-cli:
    name: "Publish rerun-cli"
    uses: ./.github/workflows/reusable_publish_rerun_cli.yml
    with:
      release-version: ${{ inputs.RELEASE_VERSION }}
      release-commit: ${{ inputs.RELEASE_COMMIT }}
      concurrency: ${{ github.ref_name }}
    secrets: inherit
