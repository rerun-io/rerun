[workspace]
resolver = "2"
members = ["crates/*", "rerun_py", "run_wasm"]

[workspace.package]
version = "0.1.0"
edition = "2021"
rust-version = "1.65"
license = "MIT OR Apache-2.0"
homepage = "http://rerun.io"
readme = "README.md"
repository = "https://github.com/rerun-io/rerun"

[workspace.dependencies]
anyhow = "1.0"
arrow2 = "0.15"
arrow2_convert = "0.3"
comfy-table = { version = "6.1", default-features = false }
derive_more = "0.99"
ecolor = { version = "0.20" }
image = "0.24"
lazy_static = "1.4"
ndarray = "0.15"
polars-core = "0.26"
polars-lazy = "0.26"
polars-ops = "0.26"
puffin = "0.14"
thiserror = "1.0"
tokio = "1.24"

[profile.dev]
opt-level = 1 # Make debug builds run faster

# Optimize all dependencies even in debug builds (does not affect workspace packages):
[profile.dev.package."*"]
opt-level = 2

[profile.release]
# debug = true # good for profilers

[profile.bench]
debug = true

[patch.crates-io]
# 2022-12-22 - Add emath::inverse_lerp
ecolor = { git = "https://github.com/emilk/egui", rev = "34f587d1e1cc69146f7a02f20903e4f573030ffd" }
eframe = { git = "https://github.com/emilk/egui", rev = "34f587d1e1cc69146f7a02f20903e4f573030ffd" }
egui = { git = "https://github.com/emilk/egui", rev = "34f587d1e1cc69146f7a02f20903e4f573030ffd" }
egui_extras = { git = "https://github.com/emilk/egui", rev = "34f587d1e1cc69146f7a02f20903e4f573030ffd" }
egui-wgpu = { git = "https://github.com/emilk/egui", rev = "34f587d1e1cc69146f7a02f20903e4f573030ffd" }
emath = { git = "https://github.com/emilk/egui", rev = "34f587d1e1cc69146f7a02f20903e4f573030ffd" }
epaint = { git = "https://github.com/emilk/egui", rev = "34f587d1e1cc69146f7a02f20903e4f573030ffd" }

# ecolor = { path = "../../egui/crates/ecolor" }
# eframe = { path = "../../egui/crates/eframe" }
# egui = { path = "../../egui/crates/egui" }
# egui_extras = { path = "../../egui/crates/egui_extras" }
# egui-wgpu = { path = "../../egui/crates/egui-wgpu" }
# emath = { path = "../../egui/crates/emath" }
# epaint = { path = "../../egui/crates/epaint" }

# Because gltf hasn't published a new version: https://github.com/gltf-rs/gltf/issues/357
gltf = { git = "https://github.com/rerun-io/gltf", rev = "3c14ded73755d1ce9e47010edb06db63cb7e2cca" }

# 2022-10-12 - Alpha to coverage support for GLES
wgpu = { git = "https://github.com/gfx-rs/wgpu.git", ref = "a377ae2b7fe6c1c9412751166f0917e617164e49" }
wgpu-core = { git = "https://github.com/gfx-rs/wgpu.git", ref = "a377ae2b7fe6c1c9412751166f0917e617164e49" }
#wgpu = { path = "../wgpu/wgpu" }

# Upstream PR https://github.com/jorgecarleitao/arrow2/pull/1351
arrow2 = { git = "https://github.com/rerun-io/arrow2", rev = "f134e58bb554b069392f6bd495aa43aa06b58944" }
# Upstream PRs https://github.com/DataEngineeringLabs/arrow2-convert/pull/90
arrow2_convert = { git = "https://github.com/rerun-io/arrow2-convert", rev = "7e0a3a3881eb4577f95d1b7af76e7f943c4fa53d" }
#arrow2 = { path = "../arrow2" }
#arrow2_convert = { path = "../arrow2-convert/arrow2_convert" }
