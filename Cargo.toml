[workspace]
resolver = "2"
members = [
  "crates/*",
  "rerun_py",
  "run_wasm",
  "examples/api_demo",
  "examples/objectron",
  "examples/raw_mesh",
]

[workspace.package]
version = "0.1.0"
edition = "2021"
rust-version = "1.67"
license = "MIT OR Apache-2.0"
homepage = "http://rerun.io"
readme = "README.md"
repository = "https://github.com/rerun-io/rerun"

[workspace.dependencies]
anyhow = "1.0"
arrow2 = "0.15"
arrow2_convert = "0.3"
comfy-table = { version = "6.1", default-features = false }
derive_more = "0.99"
ecolor = "0.20.0"
eframe = { version = "0.20.0", default-features = false }
egui = "0.20.1"
egui_extras = "0.20.0"
egui-wgpu = "0.20.0"
emath = "0.20.0"
epaint = "0.20.0"
glam = "0.22"
gltf = "1.1"
half = "2.0"
image = "0.24"
lazy_static = "1.4"
macaw = "0.18"
ndarray = "0.15"
polars-core = "0.26"
polars-lazy = "0.26"
polars-ops = "0.26"
puffin = "0.14"
reqwest = { version = "0.11", default-features = false }
thiserror = "1.0"
tokio = "1.24"
wgpu = { version = "0.15", default-features = false }
wgpu-core = { version = "0.15", default-features = false }


[profile.dev]
opt-level = 1 # Make debug builds run faster

# Optimize all dependencies even in debug builds (does not affect workspace packages):
[profile.dev.package."*"]
opt-level = 2

[profile.release]
# debug = true # good for profilers

[profile.bench]
debug = true


[patch.crates-io]
# Try to avoid patching crates! It prevents us from publishing the crates on crates.io.
# Prefer to put the crate you want to patch under [workspace.dependencies] above, if possible.
# Of course, if the crates are used transitevly, that is not possible (e.g. polars uses arrow2).

# Upstream PR https://github.com/jorgecarleitao/arrow2/pull/1360
arrow2 = { git = "https://github.com/rerun-io/arrow2", rev = "c6ef5e3dde4a18c35c8a1d91d9a741835be0305f" }
# Upstream PR https://github.com/DataEngineeringLabs/arrow2-convert/pull/91
arrow2_convert = { git = "https://github.com/rerun-io/arrow2-convert", rev = "7e63de5ce71741aaea3c36572d3e6831658ec3ed" }
# arrow2 = { path = "../arrow2" }
# arrow2_convert = { path = "../arrow2-convert/arrow2_convert" }

# 2023-02-06 - Fix wgpu transparency
ecolor = { git = "https://github.com/emilk/egui", rev = "b52cd2052f722bb09147204574504aa558b89ec0" }
eframe = { git = "https://github.com/emilk/egui", rev = "b52cd2052f722bb09147204574504aa558b89ec0" }
egui = { git = "https://github.com/emilk/egui", rev = "b52cd2052f722bb09147204574504aa558b89ec0" }
egui_extras = { git = "https://github.com/emilk/egui", rev = "b52cd2052f722bb09147204574504aa558b89ec0" }
egui-wgpu = { git = "https://github.com/emilk/egui", rev = "b52cd2052f722bb09147204574504aa558b89ec0" }
emath = { git = "https://github.com/emilk/egui", rev = "b52cd2052f722bb09147204574504aa558b89ec0" }
epaint = { git = "https://github.com/emilk/egui", rev = "b52cd2052f722bb09147204574504aa558b89ec0" }

# ecolor = { path = "../../egui/crates/ecolor" }
# eframe = { path = "../../egui/crates/eframe" }
# egui = { path = "../../egui/crates/egui" }
# egui_extras = { path = "../../egui/crates/egui_extras" }
# egui-wgpu = { path = "../../egui/crates/egui-wgpu" }
# emath = { path = "../../egui/crates/emath" }
# epaint = { path = "../../egui/crates/epaint" }

# Forks of 3rd party egui crates, tracking latest egui/master:
egui_dock = { git = "https://github.com/rerun-io/egui_dock", rev = "40af1e9f8da9bc5b7b365eb02db424b854653453" }     # https://github.com/Adanos020/egui_dock/pull/93
egui-notify = { git = "https://github.com/rerun-io/egui-notify", rev = "a158c2b81ca69ac78e3c61a705f478e8af76fd7d" } # https://github.com/ItsEthra/egui-notify/pull/10
# egui_dock = { path = "../../forks/egui_dock" }
# egui-notify = { path = "../../forks/egui-notify" }

# 2023-10-12 - Alpha to coverage support for GLES
# wgpu = { git = "https://github.com/gfx-rs/wgpu.git", ref = "a377ae2b7fe6c1c9412751166f0917e617164e49" }
# wgpu-core = { git = "https://github.com/gfx-rs/wgpu.git", ref = "a377ae2b7fe6c1c9412751166f0917e617164e49" }
# wgpu = { path = "../wgpu/wgpu" }
