[package]
name = "re_log_types"
version.workspace = true
edition.workspace = true
rust-version.workspace = true
license.workspace = true
publish = false


[features]
default = []

## Enable loading data from a file.
load = ["anyhow", "rmp-serde", "serde", "zstd", "ruzstd"]

## Add support for some math operations using [`glam`](https://crates.io/crates/glam/).
glam = ["dep:glam", "dep:macaw"]

## Add support for the [`puffin`](https://github.com/EmbarkStudios/puffin) profiler.
puffin = ["dep:puffin"]

## Enable saving data to a file.
save = ["anyhow", "rmp-serde", "serde", "zstd"]

## Enable (de)serialization using serde.
serde = ["dep:serde", "re_string_interner/serde"]


[dependencies]
ahash = "0.8"
bytemuck = "1.11"
chrono = { version = "0.4", features = ["js-sys", "wasmbind"] }
derive_more = "0.99"
document-features = "0.2"
nohash-hasher = "0.2"
re_string_interner = { path = "../re_string_interner" }
thiserror = "1.0"
uuid = { version = "1.1", features = ["serde", "v4", "js"] }

# Optional dependencies:
anyhow = { version = "1", optional = true }
glam = { version = "0.20", optional = true }                            # can't update glam until a new version of `macaw` is released
macaw = { version = "0.17", optional = true }
puffin = { version = "0.14", optional = true }
rmp-serde = { version = "1", optional = true }
serde = { version = "1", features = ["derive", "rc"], optional = true }

# Native dependencies:
[target.'cfg(not(target_arch = "wasm32"))'.dependencies]
zstd = { version = "0.11.0", optional = true } # native only

# Web dependencies:
[target.'cfg(target_arch = "wasm32")'.dependencies]
ruzstd = { version = "0.3.0", optional = true } # works on wasm
