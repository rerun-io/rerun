[package]
name = "re_log_types"
version.workspace = true
edition.workspace = true
rust-version.workspace = true
license.workspace = true
publish = false


[features]
default = []

## Enable loading data from a file.
load = ["anyhow", "rmp-serde", "serde", "zstd", "ruzstd"]

## Add support for the [`puffin`](https://github.com/EmbarkStudios/puffin) profiler.
puffin = ["dep:puffin"]

## Enable the instrumental memory profile `re_memory`.
re_memory = ["dep:re_memory"]

## Enable saving data to a file.
save = ["anyhow", "rmp-serde", "serde", "zstd"]

## Enable (de)serialization using serde.
serde = ["dep:serde", "re_string_interner/serde"]


[dependencies]
ahash = "0.8"
bytemuck = "1.11"
chrono = { version = "0.4", features = ["js-sys", "wasmbind"] }
document-features = "0.2"
nohash-hasher = "0.2"
re_string_interner = { path = "../re_string_interner" }
thiserror = "1.0"
uuid = { version = "1.1", features = ["serde", "v4", "js"] }

# Optional dependencies:
anyhow = { version = "1", optional = true }
puffin = { version = "0.13", optional = true }
re_memory = { path = "../re_memory", optional = true }
rmp-serde = { version = "1", optional = true }
serde = { version = "1", features = ["derive", "rc"], optional = true }

# Native dependencies:
[target.'cfg(not(target_arch = "wasm32"))'.dependencies]
zstd = { version = "0.10.0", optional = true } # native only

# Web dependencies:
[target.'cfg(target_arch = "wasm32")'.dependencies]
ruzstd = { version = "0.2.4", optional = true } # works on wasm
