[package]
name = "rerun"
version = "0.1.0"
edition = "2021"
rust-version = "1.63"
license = "MIT OR Apache-2.0"
publish = false
default-run = "rerun"


[features]
default = ["server"]

## Run a HTTP server that listens to incoming log messages from a Rerun SDK.
server = ["dep:re_sdk_comms"]


[dependencies]
re_viewer = { path = "../re_viewer", features = ["puffin"] }
re_ws_comms = { path = "../re_ws_comms", features = ["client"] }

# We use bleeding edge egui, from 2022-08-05
eframe      = { git = "https://github.com/emilk/egui", rev = "66c601f775ef751f7274e66bc5e81936a4d8b151", features = ["persistence"] }
egui        = { git = "https://github.com/emilk/egui", rev = "66c601f775ef751f7274e66bc5e81936a4d8b151", features = ["extra_debug_asserts", "tracing"] }
egui_extras = { git = "https://github.com/emilk/egui", rev = "66c601f775ef751f7274e66bc5e81936a4d8b151", features = ["tracing"] }
egui_glow   = { git = "https://github.com/emilk/egui", rev = "66c601f775ef751f7274e66bc5e81936a4d8b151" }
# eframe      = { path = "../../../egui/eframe", features = ["persistence"] }
# egui        = { path = "../../../egui/egui", features = ["extra_debug_asserts", "tracing"] }
# egui_extras = { path = "../../../egui/egui_extras", features = ["tracing"] }
# egui_glow   = { path = "../../../egui/egui_glow" }

puffin = { version = "0.13" }

## Optional dependencies
puffin_http = { version = "0.10", optional = true }
re_sdk_comms = { path = "../re_sdk_comms", optional=true, features = ["server"] }
tracing = "0.1"

## Native dependencies
[target.'cfg(not(target_arch = "wasm32"))'.dependencies]
clap = { version = "3.1.6", features = ["derive"] }
mimalloc = "0.1.29"
tokio = { version = "1.16", features = ["macros", "rt-multi-thread"] }
tracing-subscriber = "0.3"
