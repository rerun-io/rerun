[package]
name = "rerun"
version = "0.1.0"
edition = "2021"
rust-version = "1.63"
license = "MIT OR Apache-2.0"
publish = false
default-run = "rerun"


[features]
default = ["server"]

## Run a HTTP server that listens to incoming log messages from a Rerun SDK.
server = ["dep:re_sdk_comms"]

## Support serving a web viewer over HTTP.
web = ["re_ws_comms/server", "dep:re_web_server", "dep:webbrowser"]


[dependencies]
re_error = { path = "../re_error" }
re_log = { path = "../re_log" }
re_log_types = { path = "../re_log_types" }
re_viewer = { path = "../re_viewer", features = ["puffin"] }
re_ws_comms = { path = "../re_ws_comms", features = ["client"] }

anyhow = "1.0"
puffin = { version = "0.13" }

## Optional dependencies:
re_sdk_comms = { path = "../re_sdk_comms", optional = true, features = ["server"] }
re_web_server = { path = "../re_web_server", optional = true }

puffin_http = { version = "0.10", optional = true }
webbrowser = { version = "0.7", optional = true }

## Native dependencies
[target.'cfg(not(target_arch = "wasm32"))'.dependencies]
clap = { version = "3.1.6", features = ["derive"] }
mimalloc = "0.1.29"
tokio = { version = "1.16", features = ["macros", "rt-multi-thread"] }
tracing-subscriber = "0.3"
